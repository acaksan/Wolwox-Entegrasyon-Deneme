### ğŸš€ Wolvox-WooCommerce Entegrasyonu - Senkronizasyon SÃ¼reÃ§leri ve Veri AkÄ±ÅŸÄ± StandartlarÄ±

Bu belge, **Wolvox ERP ile WooCommerce arasÄ±nda veri senkronizasyonunun nasÄ±l gerÃ§ekleÅŸtirileceÄŸini** tanÄ±mlar. **TÃ¼m veri akÄ±ÅŸ sÃ¼reÃ§leri kontrollÃ¼, hatasÄ±z ve optimize edilmiÅŸ olmalÄ±dÄ±r.**

---

## ğŸ“Œ 1. Genel Kurallar
âœ” **TÃ¼m veri senkronizasyonu merkezi bir yapÄ± Ã¼zerinden gerÃ§ekleÅŸtirilmelidir.**
   - **Senkronizasyon iÅŸlemleri `sync/` klasÃ¶rÃ¼nde yÃ¶netilecektir.**
   - **Her senkronizasyon iÅŸlemi belirli bir gÃ¶rev Ã¼zerinden Ã§alÄ±ÅŸacaktÄ±r.**

âœ” **Veri senkronizasyonu belirli periyotlarla ve manuel olarak Ã§alÄ±ÅŸtÄ±rÄ±labilmelidir.**
   - **ZamanlanmÄ±ÅŸ gÃ¶revler ile dÃ¼zenli Ã§alÄ±ÅŸmalÄ±dÄ±r (Ã¶rn: her 15 dakikada bir).**
   - **Manuel tetikleme imkanÄ± sunulmalÄ±dÄ±r.**

âœ” **TÃ¼m veri iÅŸlemleri loglanmalÄ± ve hatalar raporlanmalÄ±dÄ±r.**
   - **BaÅŸarÄ±lÄ± ve baÅŸarÄ±sÄ±z iÅŸlemler `logs/sync.log` dosyasÄ±na kaydedilmelidir.**
   - **Hata durumunda yÃ¶neticilere bildirim gÃ¶nderilmelidir.**

âœ” **Veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ saÄŸlanmalÄ±dÄ±r.**
   - **Wolvox ve WooCommerce verileri Ã§apraz kontrol edilmelidir.**
   - **Eksik veya hatalÄ± veriler iÃ§in otomatik dÃ¼zeltme mekanizmasÄ± uygulanmalÄ±dÄ±r.**

---

## ğŸ“Œ 2. Veri Senkronizasyon AkÄ±ÅŸÄ±

### ğŸŸ¢ **ÃœrÃ¼n Senkronizasyonu (`sync_products.py`)**
1ï¸âƒ£ **Wolvox'tan tÃ¼m Ã¼rÃ¼nleri Ã§ek.**
2ï¸âƒ£ **WooCommerce ile mevcut Ã¼rÃ¼nleri karÅŸÄ±laÅŸtÄ±r.**
3ï¸âƒ£ **GÃ¼ncellenmesi gereken Ã¼rÃ¼nleri belirle.**
4ï¸âƒ£ **Yeni Ã¼rÃ¼nleri WooCommerce'e ekle.**
5ï¸âƒ£ **Stok ve fiyat bilgilerini gÃ¼ncelle.**
6ï¸âƒ£ **Ä°ÅŸlem kayÄ±tlarÄ±nÄ± `sync.log` dosyasÄ±na yaz.**

ğŸ“Œ **Ã–rnek ÃœrÃ¼n Senkronizasyon Kodu:**
```python
from repositories.product_repository import ProductRepository
from services.woocommerce_service import WooCommerceService
from utils.logger import log_event

def sync_products():
    """Wolvox'taki Ã¼rÃ¼nleri WooCommerce ile senkronize eder."""
    product_repo = ProductRepository()
    woo_service = WooCommerceService()

    wolvox_products = product_repo.get_all_products()
    woocommerce_products = woo_service.get_products()

    for product in wolvox_products:
        if product["stok_kodu"] not in [p["sku"] for p in woocommerce_products]:
            woo_service.create_product(product)
        else:
            woo_service.update_product(product)
    
    log_event("INFO", "sync_products", "ÃœrÃ¼n senkronizasyonu tamamlandÄ±.")
```

---

### ğŸŸ¢ **Stok Senkronizasyonu (`sync_stock.py`)**
1ï¸âƒ£ **Wolvoxâ€™tan stok bilgilerini Ã§ek.**
2ï¸âƒ£ **WooCommerceâ€™deki stok bilgileri ile karÅŸÄ±laÅŸtÄ±r.**
3ï¸âƒ£ **FarklÄ± olanlarÄ± gÃ¼ncelle.**
4ï¸âƒ£ **Ä°ÅŸlem kayÄ±tlarÄ±nÄ± `sync.log` dosyasÄ±na yaz.**

ğŸ“Œ **Ã–rnek Stok Senkronizasyon Kodu:**
```python
from repositories.stok_repository import StokRepository
from services.woocommerce_service import WooCommerceService
from utils.logger import log_event

def sync_stock():
    """Wolvox'tan stok miktarlarÄ±nÄ± Ã§ekip WooCommerce ile senkronize eder."""
    stok_repo = StokRepository()
    woo_service = WooCommerceService()

    wolvox_stock = stok_repo.get_all_stock()
    for stock in wolvox_stock:
        woo_service.update_stock(stock["stok_kodu"], stock["kalan_miktar"])
    
    log_event("INFO", "sync_stock", "Stok senkronizasyonu tamamlandÄ±.")
```

---

### ğŸŸ¢ **SipariÅŸ Senkronizasyonu (`sync_orders.py`)**
1ï¸âƒ£ **WooCommerceâ€™den sipariÅŸleri Ã§ek.**
2ï¸âƒ£ **Wolvoxâ€™ta ilgili mÃ¼ÅŸteri bilgilerini kontrol et.**
3ï¸âƒ£ **SipariÅŸi Wolvox ERPâ€™ye aktar.**
4ï¸âƒ£ **SipariÅŸ durumu gÃ¼ncellenmeli ve log kaydedilmelidir.**

ğŸ“Œ **Ã–rnek SipariÅŸ Senkronizasyon Kodu:**
```python
from repositories.order_repository import OrderRepository
from services.woocommerce_service import WooCommerceService
from utils.logger import log_event

def sync_orders():
    """WooCommerce sipariÅŸlerini Wolvox ERP ile senkronize eder."""
    order_repo = OrderRepository()
    woo_service = WooCommerceService()

    woocommerce_orders = woo_service.get_orders()
    for order in woocommerce_orders:
        order_repo.create_order_in_wolvox(order)
    
    log_event("INFO", "sync_orders", "SipariÅŸ senkronizasyonu tamamlandÄ±.")
```

---

## ğŸ“Œ 3. Hata YÃ¶netimi
âœ” **TÃ¼m hata mesajlarÄ± `logs/sync.log` dosyasÄ±na kaydedilmelidir.**
âœ” **Kritik hatalar yÃ¶neticilere Slack/Webhook/E-posta ile iletilmelidir.**
âœ” **BaÅŸarÄ±sÄ±z iÅŸlemler iÃ§in tekrar deneme mekanizmasÄ± bulunmalÄ±dÄ±r.**

ğŸ“Œ **Ã–rnek Hata YÃ¶netimi MekanizmasÄ±:**
```python
import logging

def handle_sync_error(error_message, sync_type):
    """Senkranizasyon hatalarÄ±nÄ± loglar ve yÃ¶neticilere bildirir."""
    logging.error(f"{sync_type} senkronizasyonunda hata: {error_message}")
    notify_admin(f"{sync_type} senkronizasyonunda hata oluÅŸtu: {error_message}")

def notify_admin(message):
    """YÃ¶neticiye e-posta/SMS/Slack bildirimi gÃ¶nderir."""
    print(f"UYARI! YÃ¶neticiye bildirildi: {message}")  # GerÃ§ek sistemde mail/sms gÃ¶nderimi yapÄ±lÄ±r.
```

---

Bu belge **katÄ± kurallar iÃ§ermektedir** ve **bu kurallara uyulmadan veri senkronizasyonu yapÄ±lamaz.** ğŸš€

